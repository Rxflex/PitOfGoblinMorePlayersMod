# Примеры использования MorePlayers

## Базовое использование

### 1. Установка и первый запуск

После установки мода запустите игру. В консоли MelonLoader вы увидите:

```
[MorePlayers] ========================================
[MorePlayers] MorePlayers mod initialized!
[MorePlayers] Max players set to: 20
[MorePlayers] Game default limit: 4
[MorePlayers] You can change MaxPlayers in the config file
[MorePlayers] ========================================
```

### 2. Создание лобби на 20 игроков

1. Запустите игру
2. Выберите "Multiplayer" → "Create Lobby"
3. Создайте лобби как обычно
4. В консоли появится:
   ```
   [NetworkHandler.CreateLobbyAsync] Original maxPlayers: 4
   [NetworkHandler.CreateLobbyAsync] Changed maxPlayers to: 20
   ```
5. Теперь в ваше лобби могут зайти до 20 игроков

### 3. Подключение к лобби

Когда игрок подключается к лобби, в консоли хоста появится:
```
[NetworkHandler.OnApprovingConnection] Client attempting to connect (Max: 8)
```

## Настройка конфигурации

### Изменение максимального количества игроков

1. Запустите игру хотя бы один раз с модом
2. Закройте игру
3. Откройте файл: `<Папка игры>\UserData\MelonPreferences.cfg`
4. Найдите секцию:
   ```ini
   [MorePlayers]
   MaxPlayers = 8
   ```
5. Измените значение на нужное (например, 12):
   ```ini
   [MorePlayers]
   MaxPlayers = 12
   ```
6. Сохраните файл и запустите игру

### Примеры конфигураций

#### Для маленькой группы друзей (6 игроков)
```ini
[MorePlayers]
MaxPlayers = 6
```

#### Для средней компании (12 игроков)
```ini
[MorePlayers]
MaxPlayers = 12
```

#### По умолчанию (20 игроков)
```ini
[MorePlayers]
MaxPlayers = 20
```

#### Для больших серверов (50 игроков)
```ini
[MorePlayers]
MaxPlayers = 50
```

⚠️ **Внимание:** Значения больше 20 могут вызвать проблемы с производительностью в зависимости от вашего оборудования!

## Сценарии использования

### Сценарий 1: Игра с друзьями

**Ситуация:** У вас 6 друзей, и вы хотите играть вместе.

**Решение:**
1. Установите мод всем игрокам
2. Установите `MaxPlayers = 6` в конфиге
3. Хост создает лобби
4. Все подключаются к лобби

### Сценарий 2: Турнир

**Ситуация:** Вы организуете турнир на 20 человек.

**Решение:**
1. Установите мод всем участникам
2. Используйте дефолтное значение `MaxPlayers = 20` в конфиге
3. Создайте лобби для турнира
4. Все участники подключаются

### Сценарий 3: Тестирование

**Ситуация:** Вы хотите протестировать мод с разным количеством игроков.

**Решение:**
1. Начните с `MaxPlayers = 6`
2. Протестируйте игру
3. Увеличьте до `MaxPlayers = 8`
4. Снова протестируйте
5. Найдите оптимальное значение для вашей группы

## Отладка

### Проверка работы мода

Чтобы убедиться, что мод работает правильно:

1. Запустите игру
2. Откройте консоль MelonLoader (обычно открывается автоматически)
3. Найдите строки:
   ```
   [MorePlayers] MorePlayers mod initialized!
   [MorePlayers] Max players set to: X
   ```
4. Создайте лобби и проверьте:
   ```
   [NetworkHandler.CreateLobbyAsync] Changed maxPlayers to: X
   ```

### Просмотр полных логов

Если что-то не работает, проверьте полные логи:

1. Откройте файл: `<Папка игры>\MelonLoader\Latest.log`
2. Найдите секцию с `[MorePlayers]`
3. Проверьте наличие ошибок (строки с `ERROR` или `Exception`)

### Пример успешного лога

```
[00:00:01.234] [MorePlayers] ========================================
[00:00:01.234] [MorePlayers] MorePlayers mod initialized!
[00:00:01.234] [MorePlayers] Max players set to: 20
[00:00:01.234] [MorePlayers] Game default limit: 4
[00:00:01.234] [MorePlayers] You can change MaxPlayers in the config file
[00:00:01.234] [MorePlayers] ========================================
[00:00:15.678] [NetworkHandler.Awake] Set m_maxClientCount to 20
[00:00:30.123] [NetworkHandler.CreateLobbyAsync] Original maxPlayers: 4
[00:00:30.123] [NetworkHandler.CreateLobbyAsync] Changed maxPlayers to: 20
[00:00:45.456] [NetworkHandler.OnApprovingConnection] Client attempting to connect (Max: 20)
```

## Частые вопросы

### Q: Нужно ли всем игрокам устанавливать мод?
**A:** Да, для корректной работы мультиплеера все игроки должны иметь установленный мод с одинаковыми настройками.

### Q: Можно ли изменить количество игроков без перезапуска?
**A:** Нет, в текущей версии нужно перезапустить игру после изменения конфига.

### Q: Какое максимальное количество игроков рекомендуется?
**A:** По умолчанию мод устанавливает лимит в 20 игроков. Для стабильной работы на большинстве систем рекомендуется не превышать это значение. Однако вы можете экспериментировать с разными значениями в зависимости от вашего оборудования.

### Q: Что делать, если игра крашится?
**A:** 
1. Уменьшите значение `MaxPlayers` в конфиге
2. Проверьте логи на наличие ошибок
3. Убедитесь, что у всех игроков одинаковая версия мода
4. Попробуйте переустановить мод

### Q: Работает ли мод с другими модами?
**A:** В большинстве случаев да, но возможны конфликты с модами, которые также изменяют сетевые настройки.

## Дополнительные советы

1. **Производительность:** Чем больше игроков, тем выше нагрузка на сеть и процессор хоста
2. **Стабильность:** Начните с меньшего значения и постепенно увеличивайте
3. **Синхронизация:** Убедитесь, что у всех игроков одинаковые настройки
4. **Тестирование:** Протестируйте мод в приватном лобби перед публичной игрой

## Поддержка

Если у вас возникли проблемы или вопросы, не описанные в этом документе:
- Создайте [Issue](https://github.com/Rxflex/MorePlayers/issues) на GitHub
- Приложите логи из `MelonLoader\Latest.log`
- Опишите шаги для воспроизведения проблемы
